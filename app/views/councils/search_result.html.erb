<%= render 'shared/header' %>
<div class='main'>
  <% if @all_match.present? %>
    <h1 class='council-name'>すべての条件に一致した議員</h1>
    <div class='assemblymen-list'>
      <% @all_match.each do |assemblyman| %>
        <div class='assemblyman-content'>
          <% if assemblyman.img_url %>
            <%= image_tag assemblyman.img_url, class: 'assemblyman-img' %>
          <% else %>
            <%= image_tag 'assembly-img-dammy.png', class: 'assemblyman-img' %>
          <% end %>
          <div class='profile-content'>
            <% if assemblyman.twitter_url %>
              <%= link_to image_tag('Twitter_social_icons-circle-blue.png', class: 'twitter-icon-sm'), "https://twitter.com/#{assemblyman.twitter_url}", target: :_blank, rel: "noopener noreferrer"%>
            <% end %>
            <div class='council-name'>
              <%= assemblyman.name %>
            </div>
            <div class='profile-faction'>
              <%= assemblyman.faction %>
            </div>
            <div>
              <%= link_to '詳しく見る', "/prefectures/#{params[:prefecture_id]}/councils/#{params[:id]}/assemblymen/#{assemblyman.id}", class: 'blue-link-btn' %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <%# 部分一致の結果を表示 %>
    <% if @faction_match.present? %>
    <h1 class='council-name'>政党が一致した議員</h1>
    <div class='assemblymen-list'>
      <% @faction_match.each do |assemblyman| %>
        <div class='assemblyman-content'>
          <% if assemblyman.img_url %>
            <%= image_tag assemblyman.img_url, class: 'assemblyman-img' %>
          <% else %>
            <%= image_tag 'assembly-img-dammy.png', class: 'assemblyman-img' %>
          <% end %>
          <div class='profile-content'>
            <% if assemblyman.twitter_url %>
              <%= link_to image_tag('Twitter_social_icons-circle-blue.png', class: 'twitter-icon-sm'), "https://twitter.com/#{assemblyman.twitter_url}", target: :_blank, rel: "noopener noreferrer"%>
            <% end %>
            <div class='council-name'>
              <%= assemblyman.name %>
            </div>
            <div class='profile-faction'>
              <%= assemblyman.faction %>
            </div>
            <div>
              <%= link_to '詳しく見る', "/prefectures/#{params[:prefecture_id]}/councils/#{params[:id]}/assemblymen/#{assemblyman.id}", class: 'blue-link-btn' %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <% end %>
    <% if @sex_match.present? %>
    <h1 class='council-name'>性別が一致した議員</h1>
    <div class='assemblymen-list'>
      <% @sex_match.each do |assemblyman| %>
        <div class='assemblyman-content'>
          <% if assemblyman.img_url %>
            <%= image_tag assemblyman.img_url, class: 'assemblyman-img' %>
          <% else %>
            <%= image_tag 'assembly-img-dammy.png', class: 'assemblyman-img' %>
          <% end %>
          <div class='profile-content'>
            <% if assemblyman.twitter_url %>
              <%= link_to image_tag('Twitter_social_icons-circle-blue.png', class: 'twitter-icon-sm'), "https://twitter.com/#{assemblyman.twitter_url}", target: :_blank, rel: "noopener noreferrer"%>
            <% end %>
            <div class='council-name'>
              <%= assemblyman.name %>
            </div>
            <div class='profile-faction'>
              <%= assemblyman.faction %>
            </div>
            <div>
              <%= link_to '詳しく見る', "/prefectures/#{params[:prefecture_id]}/councils/#{params[:id]}/assemblymen/#{assemblyman.id}", class: 'blue-link-btn' %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <% end %>
    <% if @job_match.present? %>
    <h1 class='council-name'>職業が一致した議員</h1>
    <div class='assemblymen-list'>
      <% @job_match.each do |assemblyman| %>
        <div class='assemblyman-content'>
          <% if assemblyman.img_url %>
            <%= image_tag assemblyman.img_url, class: 'assemblyman-img' %>
          <% else %>
            <%= image_tag 'assembly-img-dammy.png', class: 'assemblyman-img' %>
          <% end %>
          <div class='profile-content'>
            <% if assemblyman.twitter_url %>
              <%= link_to image_tag('Twitter_social_icons-circle-blue.png', class: 'twitter-icon-sm'), "https://twitter.com/#{assemblyman.twitter_url}", target: :_blank, rel: "noopener noreferrer"%>
            <% end %>
            <div class='council-name'>
              <%= assemblyman.name %>
            </div>
            <div class='profile-faction'>
              <%= assemblyman.faction %>
            </div>
            <div>
              <%= link_to '詳しく見る', "/prefectures/#{params[:prefecture_id]}/councils/#{params[:id]}/assemblymen/#{assemblyman.id}", class: 'blue-link-btn' %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <% end %>
  <% end %>
  <%= link_to '検索に戻る', "/prefectures/#{params[:prefecture_id]}/councils/#{params[:id]}/search", class: 'blue-link-btn' %>
</div>

<%= render 'shared/footer' %>
<%= render "shared/header" %>
<div class='main'>
  <% if @assemblyman.council.name.include?('知事・市長') %>
    <h1 class='council-name'><%= @assemblyman.position %></h1>
  <% end %>
  <div class='assemblyman-profile-details'>
    <h1 class='council-name'><%= @assemblyman.name %></h1>
    <div class='profile-background'>
      <% if @assemblyman.img_url %>
        <%= image_tag @assemblyman.img_url, class: 'assemblyman-img' %>
      <% else %>
        <%= image_tag 'assemblyman-alt-img.png', class: 'assemblyman-img' %>
      <% end %>
      <div class='profile-details'>
        <% if @assemblyman.birth_of_date %>
          <div class='profile-wrap'>
            <span class='profile-heading'>生年月日</span>
            <span class='profile-text'><%= l @assemblyman.birth_of_date %></span>
          </div>
        <% end %>
        <% if @assemblyman.council.name.include?('知事・市長') %>
          <div class='profile-wrap'>
          <span class='profile-heading'>党派</span>
        <% else %>
          <% if @assemblyman.position %>
            <div class='profile-wrap'>
              <span class='profile-heading'>役職等</span>
              <span class='profile-text'><%= @assemblyman.position %></span>
            </div>
          <% end %>
          <div class='profile-wrap'>
            <span class='profile-heading'>所属政党・会派等</span>
        <% end %>
          <span class='profile-text'><%= @assemblyman.faction %></span>
        </div>
        <% if @assemblyman.number_of_wins %>
        <div class='profile-wrap'>
          <span class='profile-heading'>当選回数</span>
          <span class='profile-text'><%= @assemblyman.number_of_wins %> 回</span>
        </div>
        <% end %>
        <% if @assemblyman.job %>
          <div class='profile-wrap'>
            <span class='profile-heading'>職業</span>
            <span class='profile-text'><%= @assemblyman.job %></span>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <%# Twitterタイムライン表示エリア %>
  <% if @assemblyman.twitter_url %>
    <div class='tweet-area'>
      <%= image_tag 'Twitter_social_icons-circle-blue.png', class: 'twitter_icon_circle' %>
      <a class="twitter-timeline" data-width='600px' data-height='400px' data-chrome='noheader nofooter noborders transparent' href="https://twitter.com/<%=@assemblyman.twitter_url%>"><%= @assemblyman.name %>さんのツイート</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
      <p>※本人のアカウントであることを保証するものではありません。</p>
    </div>
  <% end %>
  <%# Twitterタイムライン表示エリア %>
  <%= link_to '議員一覧へ',  "/prefectures/#{params[:prefecture_id]}/councils/#{params[:council_id]}", class: 'blue-link-btn'%>
  <%# コメントエリア %>
  <div class="comments-area">
    <%# コメントを一覧表示 %>
    <ul class='comments-list'>
      <% if @comments.find_by(assemblyman_id: params[:id]) %>
        <% @comments.each do |comment| %> 
          <li class="comment-content">
            <div class='comment-user'>
              <%= comment.user.nickname %>
            </div>
            <span class='comment-text'><%= comment.comment %></span>
          </li>
        <% end %>
      <% else  %>
        <li class='notes'>コメントはまだありません。</li>
      <% end %>
    </ul>
    <%# コメント投稿ページへのリンク %>
    <%= link_to 'コメントを書く', new_prefecture_council_assemblyman_comment_path(assemblyman_id: params[:id]), class: 'comment-link-btn' %>
  </div>
  <%# コメントエリア %>
</div>
<%= render 'shared/footer' %>